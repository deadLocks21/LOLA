"use strict";

new Promise((resolve, reject) => {
    var url = "api/sectors/".concat(document.getElementById("getLogin").innerHTML);

    const xhr = new XMLHttpRequest();
    xhr.open("GET", url);
    xhr.onload = () => resolve(JSON.parse(xhr.responseText));
    xhr.onerror = () => reject(xhr.statusText);
    xhr.send();
}).then( (value) => {
    var sectors = value['sectors'];
    var userType = document.getElementById("getUserType").innerHTML;

    sectors.forEach(element => {
        switch(userType) {
            case "2":
                var sector = createStudentSector(element['label1'], element['label2']);
                break;
            case "3":
                var sector = createAdminSector(element['label1'], element['label2']);
                break; 
        }
        document.getElementById("sectorContainer").appendChild(sector);
    });

    if(userType == 3) {
        document.getElementById("sectorContainer").appendChild(createAddSector());
    }
});